{"version":3,"sources":["view/login.js"],"names":["Wrapper","styled","div","Title","h1","Component","useStore","AuthStore","UserStore","history","useHistory","name","labelCol","span","wrapperCol","initialValues","remember","onFinish","values","console","log","setUsername","username","setPassword","password","login","then","currentUser","push","catch","e","onFinishFailed","errorInfo","autoComplete","Item","label","rules","required","message","validator","rule","value","test","Promise","reject","lenth","resolve","min","max","Password","offset","type","htmlType"],"mappings":"uLAOMA,EAAQC,IAAOC,IAAR,iJAOPC,EAAMF,IAAOG,GAAR,qEAsHIC,UAjHG,WAAO,IAAD,EACQC,cAAxBC,EADgB,EAChBA,UAAUC,EADM,EACNA,UACZC,EAAUC,cA2Bd,OACE,eAACV,EAAD,WACC,cAACG,EAAD,2BAID,eAAC,IAAD,CACEQ,KAAK,QACLC,SAAU,CACRC,KAAM,GAERC,WAAY,CACVD,KAAM,IAERE,cAAe,CACbC,UAAU,GAEZC,SA3Ca,SAACC,GACZC,QAAQC,IAAI,YAAaF,GACzBX,EAAUc,YAAYH,EAAOI,UAC7Bf,EAAUgB,YAAYL,EAAOM,UAC7BjB,EAAUkB,QACPC,MAAK,WACJP,QAAQC,IAAI,2DACZD,QAAQC,IAAIZ,EAAUmB,aACtBlB,EAAQmB,KAAK,QACZC,OAAM,SAACC,GACRX,QAAQC,IAAIU,GACZX,QAAQC,IAAI,gCAiClBW,eA5BmB,SAACC,GACtBb,QAAQC,IAAI,UAAWY,IA4BrBC,aAAa,MAbf,UAeE,cAAC,IAAKC,KAAN,CACEC,MAAM,qBACNxB,KAAK,WACLyB,MAAO,CACL,CACEC,UAAU,EACVC,QAAS,yCACT,CACAC,UAnCc,SAACC,EAAKC,GAC1B,MAAG,KAAKC,KAAKD,GAAeE,QAAQC,OAAO,gEACxCH,EAAMI,MAAM,GAAKJ,EAAMI,MAAM,GAAWF,QAAQC,OAAO,wDACnDD,QAAQG,aAwBf,SAYE,cAAC,IAAD,MAGF,cAAC,IAAKZ,KAAN,CAEEC,MAAM,eACNxB,KAAK,WACLyB,MAAO,CACL,CACEC,UAAU,EACVC,QAAS,wCACT,CACAS,IAAI,EACJT,QAAQ,mCAER,CACAU,IAAI,GACJV,QAAQ,qCAdd,SAkBE,cAAC,IAAMW,SAAP,MAeF,cAAC,IAAKf,KAAN,CACEpB,WAAY,CACVoC,OAAQ,GACRrC,KAAM,IAHV,SAME,cAAC,IAAD,CAAQsC,KAAK,UAAUC,SAAS,SAAhC","file":"static/js/10.9d31b598.chunk.js","sourcesContent":["import { Form, Input, Button,message} from 'antd';\r\nimport React from 'react';\r\nimport styled from 'styled-components';\r\nimport {useStore } from '../store';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n\r\nconst Wrapper=styled.div`\r\nmax-width:600px;\r\nmargin:30px auto;\r\nbox-shadow:2px 2px 2px 3px rgba(0,0,0,0.3);\r\nborder-radius:6px;\r\npadding:20px;\r\n`\r\nconst Title=styled.h1`\r\ntext-align:center;\r\nmargin-bottom:25px;\r\n`\r\n\r\nconst Component = () => {\r\nconst { AuthStore,UserStore } = useStore();\r\nconst history = useHistory();\r\n  const onFinish = (values) => {\r\n        console.log('Success2:', values);\r\n        AuthStore.setUsername(values.username);\r\n        AuthStore.setPassword(values.password);\r\n        AuthStore.login()\r\n          .then(() => {\r\n            console.log('登录成功,跳转到首页')\r\n            console.log(UserStore.currentUser)\r\n            history.push('/')\r\n          }).catch((e)=>{\r\n            console.log(e)  \r\n            console.log('登录失败')\r\n          })\r\n\r\n  };\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n  };\r\n\r\n   const validateUsername=(rule,value)=>{ // 注意，正则表达式的W是大写的！\r\n      if(/\\W/.test(value)) return Promise.reject('只能是字母数字下划线');\r\n      if(value.lenth<4 || value.lenth>10) return Promise.reject('字符长度只能是4-10位');\r\n      return Promise.resolve()\r\n   };\r\n\r\n  return (\r\n    <Wrapper>\r\n     <Title>\r\n       登录\r\n     </Title>\r\n\r\n    <Form\r\n      name=\"basic\"\r\n      labelCol={{\r\n        span: 4,\r\n      }}\r\n      wrapperCol={{\r\n        span: 20,\r\n      }}\r\n      initialValues={{\r\n        remember: true,\r\n      }}\r\n      onFinish={onFinish}\r\n      onFinishFailed={onFinishFailed}\r\n      autoComplete=\"off\"\r\n    >\r\n      <Form.Item\r\n        label=\"用户名\"\r\n        name=\"username\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: '请输入用户名!',\r\n          },{\r\n            validator:validateUsername\r\n          }\r\n        ]}\r\n      >\r\n        <Input />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        \r\n        label=\"密码\"\r\n        name=\"password\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: '请输入密码！',\r\n          },{\r\n            min:4,\r\n            message:'最小4个字符'\r\n\r\n          },{\r\n            max:10,\r\n            message:'最大10个字符'\r\n          }\r\n        ]}\r\n      >\r\n        <Input.Password />\r\n      </Form.Item>\r\n\r\n      {/* 没有用的cheackbox栏 */}\r\n      {/* <Form.Item\r\n        name=\"remember\"\r\n        valuePropName=\"checked\"\r\n        wrapperCol={{\r\n          offset: 8,\r\n          span: 16,\r\n        }}\r\n      >\r\n        <Checkbox>Remember me</Checkbox>\r\n      </Form.Item> */}\r\n\r\n      <Form.Item\r\n        wrapperCol={{\r\n          offset: 10,\r\n          span: 30,\r\n        }}\r\n      >\r\n        <Button type=\"primary\" htmlType=\"submit\">\r\n        提交\r\n        </Button>\r\n      </Form.Item>\r\n    </Form>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Component;"],"sourceRoot":""}